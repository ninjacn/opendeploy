{% extends 'base_front.html' %}

{% block content-header %}
<h1>
    任务列表
    <small></small>
</h1>
<ol class="breadcrumb">
    <li><a href="{% url 'deploy:homepage' %}"><i class="fa fa-home"></i>首页</a></li>
    <li class="active">任务列表</li>
</ol>
{% endblock %}

{% block content %}
<div class="row">
        <div class="col-xs-12">
          <div class="box">
            <div class="box-header hide">
              <h3 class="box-title"></h3>

              <div class="box-tools">
                <div class="input-group input-group-sm" style="width: 150px;">
                  <input type="text" name="table_search" class="form-control pull-right" placeholder="Search">

                  <div class="input-group-btn">
                    <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                  </div>
                </div>
              </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
<div id="example1_wrapper" class="dataTables_wrapper form-inline dt-bootstrap"><div class="row"><div class="col-sm-6"><div class="dataTables_length" id="example1_length"><label>Show <select name="example1_length" aria-controls="example1" class="form-control input-sm"><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select> entries</label></div></div><div class="col-sm-6"><div id="example1_filter" class="dataTables_filter"><label>Search:<input type="search" class="form-control input-sm" placeholder="" aria-controls="example1"></label></div></div></div><div class="row"><div class="col-sm-12"><table id="example1" class="table table-bordered table-striped dataTable" role="grid" aria-describedby="example1_info">

              <table class="table table-hover">
                <thead>
                    <tr>
                      <th>状态</th>
                      <th>ID</th>
                      <th>项目</th>
                      <th>环境</th>
                      <th>创建日期</th>
                      <th>发布原因</th>
                      <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    {% for task in tasks %}
                    <tr>
                        <td>{{ task.get_status_display }}</td>
                        <td>{{ task.id }}</td>
                        <td>{{ task.project }}</td>
                        <td>{{ task.env }}</td>
                        <td>{{ task.created_at }}</td>
                        <td>{{ task.comment }}</td>
                        <td>
                            <a href="{% url 'deploy:detail' task.id %} }}">
                                <button type="button" class="btn btn-primary btn-sm" title="任务详情" data-toggle="tooltip" >
                                    <i class="fa fa-info-circle" aria-hidden="true"></i>
                                </button>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
              </tbody>
              </table>
                <div class="row">
                    <div class="col-md-12">
                        <div class="dataTables_paginate paging_simple_numbers" id="example1_paginate">
                            <ul class="pagination">
                                {% if tasks.has_previous %}
                                <li class="page-item">
                                <li class="paginate_button previous">
                                    <a class="page-link" href="?page={{ tasks.previous_page_number }}&{{ parameters }}" tabindex="-1">上一页</a>
                                </li>
                                {% else %}
                                <li class="paginate_button previous disabled">
                                  <a class="page-link" href="#" tabindex="-1">上一页</a>
                                </li>
                                {% endif %}

                                <li class="paginate_button active">
                                    <a class="page-link" href="#" tabindex="-1">{{ tasks.number }} / {{ tasks.paginator.num_pages }}</a>
                                </li>

                                {% if tasks.has_next %}
                                <li class="paginate_button next">
                                    <a class="page-link" href="?page={{ tasks.next_page_number }}&{{ parameters }}">下一页</a>
                                </li>
                                {% else %}
                                <li class="paginate_button next disabled">
                                    <a class="page-link" href="#">下一页</a>
                                </li>
                                {% endif %}

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->
        </div>
      </div>

{% endblock %}

{% block script %}
<script>
</script>
{% endblock %}
